generator client {
  provider = "prisma-client-js"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
}

model User {
  id                       String          @id @default(uuid())
  email                    String          @unique
  password                 String
  firstname                String
  lastname                 String
  phone                    String?
  role                     UserRole
  createdAt                DateTime        @default(now())
  updatedAt                DateTime        @updatedAt
  specialty                PractitionerSpecialty?

  patientAppointments      Appointment[]   @relation("PatientAppointments")
  practitionerAppointments Appointment[]   @relation("PractitionerAppointments")
}

model Appointment {
  id             String             @id @default(uuid())
  patientId      String
  practitionerId String
  date           DateTime
  type           AppointmentType
  status         AppointmentStatus  @default(SCHEDULED)
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt

  patient        User               @relation("PatientAppointments", fields: [patientId], references: [id])
  practitioner   User               @relation("PractitionerAppointments", fields: [practitionerId], references: [id])
}

enum UserRole {
  PATIENT
  PRACTITIONER
}

enum PractitionerSpecialty {
  GENERALIST
  CARDIOLOGIST
  DENTIST
  DERMATOLOGIST
  PEDIATRICIAN
  OPHTALMOLOGIST
}

enum AppointmentType {
  VISIO
  PRESENTIEL
}

enum AppointmentStatus {
  SCHEDULED
  CANCELLED
  DONE
}